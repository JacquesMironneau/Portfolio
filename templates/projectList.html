{% extends "base.html" %}


{% block title %} Project list {% endblock %}

{% block content %}

<div class="card-container">


{% if projectList %}
<script>
    console.log("ProjectList == ok")
</script>
{% for project in projectList %}
<div class="card">
    <div class="circle"></div>
    <div class="content">
        <h2></h2>
        <p>

        </p>
        <a href="#"> More details</a>
    </div>
    <img src="">
</div>
{% endfor %}
<script>
    let cards = document.querySelectorAll('.card')
    let card_index = 0
    let file_index = 0

    // iterate through projects 
    {% for project in projectList %}
        file_index = 0
        // attach the first file
        // this file corresponds to the image thumbnail and background
        {% for file in project.attached_files %}
            if (file_index == 0) cards[card_index].children[2].src = "{{ url_for('static', filename='upload/'+file.file_url) }}"
            file_index++
        {% endfor %}

        // init the cards
        cards[card_index].children[1].children[0].innerHTML = '{{ project.project_name }}'
        cards[card_index].children[1].children[1].innerHTML = '{{ project.short_desc }}'
        cards[card_index].children[1].children[2].href = `/project/${card_index+1}`
        cards[card_index].children[2].alt = '{{ project.project_name }}'
    
        card_index++
    {% endfor %}

</script>
</div>

{% else %}
<h1 class="error">Oh there's nothing to watch here, an internal error occured :c</h1>
{% endif %}

{% endblock %}

